<div class="bg-white p-4 shadow-md rounded-lg">
    <div class="flex justify-between items-center mb-4">
      <div class="flex space-x-2">
        <div class="border rounded-md px-3 py-2 flex flex-row p-1 gap-2">
            <!-- Search Icon -->
            <div class="flex text-center flex-grow">
              <mat-icon class="my-1 ml-2 cursor-pointer" matPrefix (click)="onSearch(searchControl.value)">search</mat-icon>
            </div>
            
            <!-- Search Input -->
            <input
              type="text"
              matInput
              #searchInput
              [formControl]="searchControl"
              [attr.minlength]="3"
              [attr.maxlength]="100"
              (keyup.enter)="onSearch(searchInput.value)"
              placeholder="Search task"
              class="w-full pl-1 pr-8 py-1"
            />
            
            <!-- Clear Icon -->
            <div *ngIf="searchControl.value" class="flex text-center flex-grow">
              <mat-icon class="my-1 mr-2 cursor-pointer" matSuffix (click)="searchControl.setValue('')">close</mat-icon>
            </div>
          </div>
          
     
            <select class="border rounded-md px-3 py-2" id="sortOrder" [(ngModel)]="sortOrder" (change)="onSortOrderChange(sortOrder)">
              <option value="asc">Ascending</option>
              <option value="desc">Descending</option>
          </select>
          <select class="border rounded-md px-3 py-2" 
           [(ngModel)]="selectedStatus"
          (change)="onStatusChange(selectedStatus)">
           <option value="All">All</option>
            <option value="Pending">Pending</option>
            <option value="Completed">Completed</option>
          </select>
      </div>
      <div class="flex">
        <button class="bg-blue-600 text-white px-4 py-2 rounded-md" (click)="openForm('add')">
          + Assign Task
        </button>
      </div>
    </div>
    <table class="w-full border-collapse border border-gray-300 mt-5">
      <thead>
        <tr class="bg-gray-200 text-center">
          <th class="border px-4 py-2">Project Name</th>
          <th class="border px-4 py-2">Due Date</th>
          <th class="border px-4 py-2">Status</th>
          <th class="border px-4 py-2">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let task of filteredTasks; let i = index" class="text-center">
          <td class="border  px-4 py-2">{{ task.title }}</td>
          <td class="border px-4 py-2">{{ task.dueDate }}</td>
          <td class="border px-4 py-2 text-red-600"> 
            <mat-checkbox color="primary" [(ngModel)]="task.isCompleted" 
            (change)="updateStatus(task, $event.checked)">  
                {{ task.status }}
              </mat-checkbox> 
           </td>
          <td class="border px-4 py-2">
            <div class="flex space-x-2 justify-center">
                <button class="bg-blue-600 text-white px-3 py-1 rounded-md" (click)="openForm('edit', i)">
                Edit
                </button>
                <button class="bg-red-600 text-white px-3 py-1 rounded-md" (click)="deleteTask(i)">
                    Delete
                </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  
<!-- Overlay for the modal -->
<div *ngIf="showForm" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
      <mat-card class="p-8 w-[30rem]">
        <form [formGroup]="taskForm" (ngSubmit)="addTask()" class="space-y-1">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">{{ isEditMode ? 'Edit Task' : 'Add Task' }} </h2>
          <!-- Task Title -->
          <div class="flex flex-col space-y-1">
            <label for="title" class="text-sm font-medium text-gray-700">Task Title*</label>
            <mat-form-field appearance="outline" class="w-full">
              <input matInput id="title" formControlName="title" />
              <mat-error *ngIf="taskForm.get('title')?.hasError('required')">Task title is required.</mat-error>
            </mat-form-field>
          </div>
  
          <!-- Task Description -->
          <div class="flex flex-col space-y-1">
            <label for="description" class="text-sm font-medium text-gray-700">Task Description*</label>
            <mat-form-field appearance="outline" class="w-full">
              <textarea matInput id="description" formControlName="description"></textarea>
              <mat-error *ngIf="taskForm.get('description')?.hasError('required')">Task description is required.</mat-error>
            </mat-form-field>
          </div>
  
          <!-- Due Date -->
          <div class="flex flex-col space-y-1">
            <label for="dueDate" class="text-sm font-medium text-gray-700">Due Date*</label>
            <mat-form-field appearance="outline" class="w-full">
              <input matInput id="dueDate" formControlName="dueDate" type="date" />
            </mat-form-field>
          </div>
  
          <!-- Action Buttons -->
          <div class="flex justify-end items-center space-x-4">
            <button mat-button type="button" class="text-red-500 hover:text-red-700" (click)="closeForm()">
              Cancel
            </button>
            <button
              mat-raised-button
              color="primary"
              class="px-6 py-2"
              type="submit"
              [disabled]="taskForm.invalid"
            >
              {{ isEditMode ? 'Update Task' : 'Add Task' }}
            </button>
          </div>
        </form>
      </mat-card>
</div>
  
  